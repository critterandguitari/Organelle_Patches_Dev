#N canvas 57 118 1714 854 10;
#N canvas 4 50 450 278 (subpatch) 0;
#X array seqvel 33 float 3;
#A 0 126.752 126.752 126.752 126.752 126.752 126.752 126.752 126.752
126.752 126.752 126.752 126.752 126.752 126.752 126.752 126.752 126.752
126.752 126.752 126.752 126.752 126.752 126.752 126.752 126.752 126.752
126.752 126.752 126.752 126.752 126.752 126.752 2;
#X coords 0 128 33 0 200 140 1 0 0;
#X restore 756 286 graph;
#X floatatom 279 401 5 0 0 0 - - -, f 5;
#X obj 668 191 r notes;
#X obj 253 124 r notes;
#X obj 563 223 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 377 50 1126 994 seqplayer 0;
#X floatatom 130 231 5 0 0 0 - - -, f 5;
#X obj 367 708 tabread seq;
#X floatatom 368 732 5 0 0 0 - - -, f 5;
#X floatatom 366 664 5 0 0 0 - - -, f 5;
#X obj 165 768 delay;
#X obj 180 442 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X msg 179 393 1;
#X obj 220 445 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 283 584 ==;
#X obj 252 520 t b f;
#X obj 185 724 spigot 0;
#X obj 137 -9 stripnote;
#X obj 130 191 spigot;
#X obj 39 128 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 236 488 counter-up 16;
#X obj 283 562 == 15;
#X obj 453 791 + 60;
#X obj 437 857 pack 0 100;
#X obj 141 -63 inlet;
#X obj 39 73 inlet;
#X obj 341 74 inlet;
#X obj 365 418 - 1;
#X obj 436 888 outlet;
#X obj 680 73 inlet;
#X text 36 39 enable;
#X text 141 -85 note;
#X text 328 47 length;
#X text 689 41 speed;
#X obj 255 15 unpack;
#X obj 299 181 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 299 214 ==;
#X obj 294 626 spigot 1;
#X obj 680 252 moses 10;
#X obj 287 712 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 240 804 s is-playing;
#N canvas 1232 509 450 297 switch 0;
#X obj 145 49 inlet;
#X obj 147 184 outlet;
#X obj 266 178 outlet;
#X obj 320 50 inlet;
#X obj 281 84 ==;
#X obj 150 128 spigot 1;
#X obj 258 124 spigot 0;
#X obj 230 49 inlet;
#X connect 0 0 5 0;
#X connect 3 0 4 0;
#X connect 3 0 6 1;
#X connect 4 0 5 1;
#X connect 5 0 1 0;
#X connect 6 0 2 0;
#X connect 7 0 6 0;
#X restore 149 289 pd switch;
#X obj 192 231 r is-playing;
#N canvas 232 119 450 297 switch 0;
#X obj 145 49 inlet;
#X obj 147 184 outlet;
#X obj 266 178 outlet;
#X obj 320 50 inlet;
#X obj 249 81 ==;
#X obj 150 128 spigot 1;
#X obj 258 124 spigot 0;
#X connect 0 0 5 0;
#X connect 0 0 6 0;
#X connect 3 0 4 0;
#X connect 3 0 6 1;
#X connect 4 0 5 1;
#X connect 5 0 1 0;
#X connect 6 0 2 0;
#X restore 67 553 pd switch;
#X obj 164 359 t b b b f b;
#X obj 224 309 t f b;
#X msg 120 511 0;
#X msg 157 513 1;
#X obj 204 335 f;
#X obj 242 273 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 143 257 t a a;
#X obj 204 134 f;
#X obj 274 78 sel 0;
#X obj 303 100 bang;
#X msg 304 123 1;
#X obj 143 -40 t a a;
#X obj 260 44 swap;
#X obj 259 128 f;
#X obj 229 105 t b b;
#X obj 227 158 ==;
#X obj 225 182 sel 1;
#X msg 225 204 0;
#X obj 452 816 - 60;
#X obj 370 758 moses 1;
#X text 440 757 filter out notes that are 0;
#X obj 504 710 tabread seqvel;
#X obj 365 684 t f f;
#X connect 0 0 44 0;
#X connect 1 0 2 0;
#X connect 2 0 57 0;
#X connect 3 0 60 0;
#X connect 4 0 37 0;
#X connect 5 0 10 1;
#X connect 5 0 33 0;
#X connect 6 0 5 0;
#X connect 7 0 14 0;
#X connect 8 0 31 0;
#X connect 9 0 10 0;
#X connect 9 1 3 0;
#X connect 9 1 15 0;
#X connect 10 0 4 0;
#X connect 11 0 12 0;
#X connect 11 0 45 1;
#X connect 12 0 0 0;
#X connect 13 0 12 1;
#X connect 14 0 9 0;
#X connect 15 0 8 0;
#X connect 16 0 56 0;
#X connect 17 0 22 0;
#X connect 18 0 49 0;
#X connect 19 0 13 0;
#X connect 20 0 14 2;
#X connect 20 0 21 0;
#X connect 21 0 15 1;
#X connect 23 0 32 0;
#X connect 28 0 50 0;
#X connect 28 1 50 1;
#X connect 29 0 30 0;
#X connect 30 0 31 1;
#X connect 31 0 10 1;
#X connect 31 0 33 0;
#X connect 32 1 4 1;
#X connect 33 0 34 0;
#X connect 35 0 38 0;
#X connect 35 1 39 0;
#X connect 36 0 35 2;
#X connect 36 0 43 0;
#X connect 37 0 7 0;
#X connect 37 1 42 0;
#X connect 38 0 7 0;
#X connect 38 1 6 0;
#X connect 38 2 14 1;
#X connect 38 3 16 1;
#X connect 38 4 40 0;
#X connect 39 0 42 1;
#X connect 39 1 41 0;
#X connect 40 0 37 1;
#X connect 41 0 37 1;
#X connect 42 0 38 0;
#X connect 44 0 35 0;
#X connect 44 1 35 1;
#X connect 45 0 53 0;
#X connect 46 0 52 0;
#X connect 46 1 47 0;
#X connect 47 0 48 0;
#X connect 48 0 29 0;
#X connect 49 0 11 0;
#X connect 49 1 28 0;
#X connect 50 0 46 0;
#X connect 50 1 51 1;
#X connect 51 0 53 1;
#X connect 52 0 45 0;
#X connect 52 1 51 0;
#X connect 53 0 54 0;
#X connect 54 0 55 0;
#X connect 55 0 29 0;
#X connect 56 0 17 0;
#X connect 57 1 16 0;
#X connect 59 0 17 1;
#X connect 60 0 1 0;
#X connect 60 1 59 0;
#X restore 117 427 pd seqplayer;
#X obj 116 218 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X floatatom 692 332 5 0 0 0 - - -, f 5;
#X obj 208 362 r len;
#X obj 692 362 s len;
#N canvas 127 237 634 688 latch 0;
#X obj 43 405 latch-notes;
#X obj 263 232 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 173 298 spigot 1;
#X obj 43 298 spigot 0;
#X obj 263 258 == 0;
#X obj 309 312 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 263 134 inlet;
#X obj 43 626 outlet;
#X obj 43 106 inlet;
#X text 44 53 incoming notes get sent through latch if enabled \, or
directly to output if disabled;
#X text 311 135 enable;
#X obj 264 161 t f b, f 7;
#X connect 0 0 7 0;
#X connect 1 0 4 0;
#X connect 1 0 3 1;
#X connect 2 0 7 0;
#X connect 3 0 0 0;
#X connect 4 0 2 1;
#X connect 5 0 0 1;
#X connect 6 0 11 0;
#X connect 8 0 3 0;
#X connect 8 0 2 0;
#X connect 11 0 1 0;
#X connect 11 1 5 0;
#X restore 267 176 pd latch;
#X obj 330 137 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#N canvas 46 50 919 857 seqpuncher 0;
#X obj 242 626 tabwrite seq;
#X obj 244 211 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 351 334 spigot 0;
#X obj 401 264 t f b;
#X obj 444 566 sel 1;
#X obj 321 169 t f f;
#X obj 371 138 stripnote;
#X obj 444 627 outlet;
#X obj 371 107 inlet;
#X obj 220 103 inlet;
#X text 544 263 writes notes to sequence;
#X text 508 577 bang at end, f 12;
#X obj 654 136 inlet;
#X obj 556 421 - 1;
#X text 647 104 len;
#X obj 674 625 outlet;
#X text 732 624 len, f 4;
#X obj 671 589 + 1;
#X obj 399 480 counter-up 32;
#X obj 444 540 == 31;
#X obj 332 402 - 0;
#X obj 163 395 * 127;
#X obj 138 523 f;
#X obj 338 443 t b f b;
#X obj 124 624 tabwrite seqvel;
#X obj 187 782 outlet;
#X obj 188 731 swap;
#X obj 188 753 pack;
#X obj 163 340 r punchvel;
#X connect 1 0 3 0;
#X connect 2 0 20 0;
#X connect 3 0 2 1;
#X connect 3 1 18 1;
#X connect 4 0 7 0;
#X connect 5 0 2 0;
#X connect 6 0 5 0;
#X connect 8 0 6 0;
#X connect 9 0 1 0;
#X connect 12 0 13 0;
#X connect 12 0 18 2;
#X connect 13 0 19 1;
#X connect 17 0 15 0;
#X connect 18 0 0 1;
#X connect 18 0 17 0;
#X connect 18 0 19 0;
#X connect 18 0 24 1;
#X connect 19 0 4 0;
#X connect 20 0 23 0;
#X connect 21 0 22 1;
#X connect 22 0 24 0;
#X connect 22 0 26 0;
#X connect 23 0 22 0;
#X connect 23 1 0 0;
#X connect 23 1 26 1;
#X connect 23 2 18 0;
#X connect 26 0 27 0;
#X connect 26 1 27 1;
#X connect 27 0 25 0;
#X connect 28 0 21 0;
#X restore 612 263 pd seqpuncher;
#X text 763 85 up to 32 notes long \, len is stashed as last entry
;
#X obj 283 338 expr 1000/($f1/60);
#X obj 282 370 / 4;
#X obj 284 310 r bpm;
#N canvas 4 50 450 278 (subpatch) 0;
#X array seq 33 float 3;
#A 0 60 63 65 65 65 63 60 65 65 65 70 67 67 67 67 81 81 81 81 81 77
77 76 75 75 73 72 71 72 70 69 67 15;
#X coords 0 128 33 0 200 140 1 0 0;
#X restore 756 127 graph;
#X obj 286 630 outlet;
#X obj 547 389 s done-punching;
#X obj 509 298 sel 0;
#X obj 563 190 r punchenable;
#X obj 365 85 r latchenable;
#X obj 97 170 r playenable;
#N canvas 6 50 965 607 save-recall-punchseq 0;
#X msg 325 231 \; seq read seq.txt \;;
#X obj 276 170 loadbang;
#X obj 757 295 tabwrite seq;
#X msg 824 245 32;
#X obj 832 169 r len;
#X obj 833 195 t f b;
#X obj 287 200 t b b;
#X msg 213 259 32;
#X obj 212 313 s len;
#X obj 212 286 tabread seq;
#X text 536 211 when done recording;
#X text 419 152 seq saving and recalling;
#X text 720 137 stash length as last entry;
#X msg 310 288 \; seqvel read seqvel.txt \;;
#X msg 496 292 \; seq write /tmp/state/seq.txt \;;
#X msg 484 338 \; seqvel write /tmp/state/seqvel.txt \;;
#X obj 482 184 r done-punching;
#X connect 1 0 6 0;
#X connect 3 0 2 1;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X connect 5 1 3 0;
#X connect 6 0 7 0;
#X connect 6 1 0 0;
#X connect 6 1 13 0;
#X connect 7 0 9 0;
#X connect 9 0 8 0;
#X connect 16 0 14 0;
#X connect 16 0 15 0;
#X restore 753 438 pd save-recall-punchseq;
#X obj 603 319 s endofseq;
#X connect 1 0 5 3;
#X connect 2 0 12 1;
#X connect 3 0 10 0;
#X connect 4 0 12 0;
#X connect 4 0 20 0;
#X connect 5 0 18 0;
#X connect 6 0 5 0;
#X connect 7 0 9 0;
#X connect 8 0 5 2;
#X connect 10 0 5 1;
#X connect 11 0 10 1;
#X connect 12 0 18 0;
#X connect 12 1 25 0;
#X connect 12 2 7 0;
#X connect 14 0 15 0;
#X connect 15 0 1 0;
#X connect 16 0 14 0;
#X connect 20 0 19 0;
#X connect 21 0 4 0;
#X connect 22 0 11 0;
#X connect 23 0 6 0;
